{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gaming/Desktop/html/product-feedback/src/app/edit/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Lottie from \"lottie-react\";\r\nimport animationData from \"../../Animation - 1748181041132.json\";\r\nimport animationCancel from \"../Animation - 1748797716617.json\";\r\n\r\nconst Page = () => {\r\n  const params = useParams();\r\n  const [data, setData] = useState<{\r\n    publicUserId: string;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    products: any[];\r\n  } | null>(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [categoryFilter, setCategoryFilter] = useState(\"\");\r\n  const [showDropdown, setShowDropdown] = useState(false);\r\n  const [statusFilter, setStatusFilter] = useState(\"\");\r\n  const [showStatusDropdown, setShowStatusDropdown] = useState(false);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const route = useRouter();\r\n  const categoryRef = useRef<HTMLDivElement>(null);\r\n  const statusRef = useRef<HTMLDivElement>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchGuest = async () => {\r\n      const res = await fetch(\"/api/guest\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ userAgent: navigator.userAgent }),\r\n      });\r\n\r\n      const result = await res.json();\r\n      setData(result);\r\n    };\r\n\r\n    fetchGuest();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      const found = data.products.find((e) => e._id === params?.id);\r\n      if (found) {\r\n        setTitle(found.title);\r\n        setDescription(found.description);\r\n      }\r\n    }\r\n  }, [data, params?.id]);\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (\r\n        categoryRef.current &&\r\n        !categoryRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowDropdown(false);\r\n      }\r\n\r\n      if (\r\n        statusRef.current &&\r\n        !statusRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowStatusDropdown(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  if (!data) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <Lottie animationData={animationData} loop={true} />\r\n      </div>\r\n    );\r\n  }\r\n  const feedback = data.products.find((e) => e._id === params?.id);\r\n  if (!feedback) return <div>Feedback not found</div>;\r\n\r\n  return (\r\n    <div className=\"flex items-start justify-center gap-10 min-h-screen p-10 add\">\r\n      <button onClick={() => route.push(\"/\")}>\r\n        <Image\r\n          src={\"/assets/shared/icon-arrow-left.svg\"}\r\n          width={8}\r\n          height={4}\r\n          alt=\"arrow left\"\r\n        />\r\n        Go Back\r\n      </button>\r\n      <div>\r\n        <Image\r\n          src={\"/assets/shared/icon-edit-feedback.svg\"}\r\n          width={56}\r\n          height={56}\r\n          alt=\"arrow left\"\r\n        />\r\n        <h1>Editing ‘{feedback.title}’</h1>\r\n\r\n        <form\r\n          onSubmit={async (e) => {\r\n            e.preventDefault();\r\n            setIsSubmitting(true);\r\n            setError(\"\");\r\n            const res = await fetch(\"/api/edit-feedback\", {\r\n              method: \"PUT\",\r\n              headers: { \"Content-Type\": \"application/json\" },\r\n              body: JSON.stringify({\r\n                title,\r\n                description,\r\n                productId: feedback._id,\r\n                category: categoryFilter || feedback.category,\r\n                status: statusFilter || feedback.status,\r\n              }),\r\n            });\r\n\r\n            if (res.ok) {\r\n              setTimeout(() => {\r\n                route.push(\"/\");\r\n              }, 300);\r\n            } else {\r\n              setError(\"Failed to add feedback.\");\r\n            }\r\n            setIsSubmitting(false);\r\n          }}\r\n        >\r\n          <div>\r\n            <label htmlFor=\"title\">Feedback Title</label>\r\n            <p>Add a short, descriptive headline</p>\r\n            <input\r\n              type=\"text\"\r\n              name=\"title\"\r\n              id=\"title\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"relative\" ref={categoryRef}>\r\n            <label htmlFor=\"category\">Category</label>\r\n            <p>Choose a category for your feedback</p>\r\n            <div\r\n              className=\"dropdown-trigger\"\r\n              onClick={() => setShowDropdown((prev) => !prev)}\r\n            >\r\n              {categoryFilter.length ? categoryFilter : feedback.category}\r\n              <Image\r\n                src={\"/assets/shared/icon-arrow-down.svg\"}\r\n                width={8}\r\n                height={4}\r\n                alt=\"arrow down\"\r\n              />\r\n            </div>\r\n\r\n            {showDropdown && (\r\n              <ul className=\"dropdown-menu\">\r\n                {[\"UI\", \"UX\", \"Enhancement\", \"Bug\", \"Feature\"].map((cat) => (\r\n                  <li\r\n                    key={cat}\r\n                    onClick={() => {\r\n                      setCategoryFilter(cat);\r\n                      setShowDropdown(false);\r\n                    }}\r\n                    className={categoryFilter === cat ? \"active\" : \"\"}\r\n                  >\r\n                    {cat}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n          <div className=\"relative\" ref={statusRef}>\r\n            <label htmlFor=\"category\">Update Status</label>\r\n            <p>Change feature state</p>\r\n            <div\r\n              className=\"dropdown-trigger\"\r\n              onClick={() => setShowStatusDropdown((prev) => !prev)}\r\n            >\r\n              {statusFilter.length ? statusFilter : feedback.status}\r\n              <Image\r\n                src={\"/assets/shared/icon-arrow-down.svg\"}\r\n                width={8}\r\n                height={4}\r\n                alt=\"arrow down\"\r\n              />\r\n            </div>\r\n\r\n            {showStatusDropdown && (\r\n              <ul className=\"dropdown-menu\">\r\n                {[\"Suggestion\", \"Planned\", \"In-Progress\", \"Live\"].map((cat) => (\r\n                  <li\r\n                    key={cat}\r\n                    onClick={() => {\r\n                      setStatusFilter(cat);\r\n                      setShowStatusDropdown(false);\r\n                    }}\r\n                    className={statusFilter === cat ? \"active\" : \"\"}\r\n                  >\r\n                    {cat}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"Detail\">Feedback Detail</label>\r\n            <p>\r\n              Include any specific comments on what should be improved, added,\r\n              etc.\r\n            </p>\r\n            <textarea\r\n              name=\"Detail\"\r\n              id=\"Detail\"\r\n              value={description}\r\n              onChange={(e) => setDescription(e.target.value)}\r\n            ></textarea>\r\n          </div>\r\n          <div className=\"btnContainer\">\r\n            <button\r\n              className=\"delete\"\r\n              onClick={async () => {\r\n                const confirmed = window.confirm(\r\n                  \"Are you sure you want to delete this feedback?\"\r\n                );\r\n                if (!confirmed) return;\r\n\r\n                const res = await fetch(\"/api/delete-feedback\", {\r\n                  method: \"DELETE\",\r\n                  headers: { \"Content-Type\": \"application/json\" },\r\n                  body: JSON.stringify({\r\n                    productId: feedback._id,\r\n                    publicId: localStorage.getItem(\"publicUserId\"),\r\n                  }),\r\n                });\r\n\r\n                if (res.ok) {\r\n                  route.push(\"/\");\r\n                } else {\r\n                  setError(\"Failed to delete feedback.\");\r\n                }\r\n              }}\r\n            >\r\n              Delete\r\n            </button>\r\n            <div>\r\n              <button onClick={() => route.push(\"/\")}>Cancel</button>\r\n              <button type=\"submit\" disabled={isSubmitting}>\r\n                {isSubmitting ? (\r\n                  <Lottie\r\n                    animationData={animationCancel}\r\n                    loop={true}\r\n                    autoplay={true}\r\n                    className=\"upvoteLoad\"\r\n                  />\r\n                ) : (\r\n                  \"Save Changes\"\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        {error && <p className=\"error\">{error}</p>}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}