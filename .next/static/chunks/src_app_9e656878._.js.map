{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gaming/Desktop/html/product-feedback/src/app/view/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport animationLoad from \"../Animation - 1748797716617.json\";\r\nimport animationClick from \"/./Animation - 1748713628574.json\";\r\n\r\nimport Lottie from \"lottie-react\";\r\n\r\nconst Page = () => {\r\n  const route = useRouter();\r\n  const [data, setData] = useState<{\r\n    publicUserId: string;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    products: any[];\r\n  } | null>(null);\r\n  const [upvoteLoadingId, setUpvoteLoadingId] = useState<string | null>(null);\r\n  const [isNavigating, setIsNavigating] = useState(\"\");\r\n  useEffect(() => {\r\n    const fetchGuest = async () => {\r\n      const res = await fetch(\"/api/guest\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ userAgent: navigator.userAgent }),\r\n      });\r\n\r\n      const result = await res.json();\r\n      console.log(\"API result:\", result);\r\n      setData(result);\r\n    };\r\n\r\n    fetchGuest();\r\n  }, []);\r\n  console.log(data);\r\n  const normalizedStatuses = data?.products?.map((product) => ({\r\n    ...product,\r\n    status: product.status.toLowerCase(),\r\n  }));\r\n  console.log(normalizedStatuses, \"statuses\");\r\n  const groupedByStatus =\r\n    normalizedStatuses?.reduce((acc, product) => {\r\n      const status = product.status.toLowerCase();\r\n      if (!acc[status]) acc[status] = [];\r\n      acc[status].push(product);\r\n      return acc; // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    }, {} as Record<string, any[]>) ?? {};\r\n  console.log(groupedByStatus, \"groupedByStatus\");\r\n  console.log(groupedByStatus.planned, \"groupedByStatus\");\r\n  const statuses = [\"planned\", \"in-progress\", \"live\"];\r\n  const statusLabels: Record<\r\n    string,\r\n    { label: string; text: string; color: string }\r\n  > = {\r\n    planned: {\r\n      label: \"Planned\",\r\n      text: \"Ideas prioritized for research\",\r\n      color: \"#F49F85\",\r\n    },\r\n    \"in-progress\": {\r\n      label: \"In-Progress\",\r\n      text: \"Currently being developed\",\r\n      color: \"#AD1FEA\",\r\n    },\r\n    live: {\r\n      label: \"Live\",\r\n      text: \"Released features\",\r\n      color: \"#62BCFA\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-start justify-center gap-10 min-h-screen p-10 view\">\r\n      <section className=\"header\">\r\n        <div>\r\n          <button onClick={() => route.push(\"/\")}>\r\n            <Image\r\n              src={\"/assets/shared/icon-arrow-left.svg\"}\r\n              width={8}\r\n              height={4}\r\n              alt=\"arrow left\"\r\n            />\r\n            Go Back\r\n          </button>\r\n          <h3>Roadmap </h3>\r\n        </div>\r\n        <button onClick={() => route.push(\"/add\")}>+ Add Feedback</button>\r\n      </section>\r\n      <section className=\"roadmapContent\">\r\n        {groupedByStatus &&\r\n          statuses.map((status) => (\r\n            <ul key={status}>\r\n              <h3 key={status}>\r\n                {statusLabels[status].label}\r\n                <span>\r\n                  {`(${\r\n                    groupedByStatus[status]\r\n                      ? groupedByStatus[status].length\r\n                      : \"0\"\r\n                  })`}\r\n                </span>\r\n              </h3>\r\n              <p>{statusLabels[status].text}</p>\r\n              <div>\r\n                {\r\n                  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                  groupedByStatus[status]?.map((product: any) => (\r\n                    <div\r\n                      key={product._id}\r\n                      style={{ borderTopColor: statusLabels[status].color }}\r\n                      onClick={() => {\r\n                        setIsNavigating(p._id);\r\n                        setTimeout(() => {\r\n                          route.push(`/${p._id}`);\r\n                        }, 100);\r\n                      }}\r\n                    >\r\n                      <div>\r\n                        {isNavigating === p._id ? (\r\n                          <div className=\"flex justify-center items-center min-h-[100px] load bg-black\">\r\n                            <Lottie\r\n                              animationData={animationClick}\r\n                              loop={true}\r\n                            />\r\n                          </div>\r\n                        ) : (\r\n                          <ul>\r\n                            <li>{p.title}</li>\r\n                            <li>{p.description}</li>\r\n                            <li>{p.category}</li>\r\n                          </ul>\r\n                        )}\r\n                      </div>\r\n                      <p className=\"label\">\r\n                        <span\r\n                          style={{\r\n                            backgroundColor: statusLabels[status].color,\r\n                          }}\r\n                        ></span>\r\n                        {statusLabels[status].label}\r\n                      </p>\r\n                      <h4>{product.title}</h4>\r\n                      <p className=\"description\">{product.description}</p>\r\n                      <p className=\"category\">{product.category}</p>\r\n                      <div>\r\n                        <p\r\n                          className=\"upvotes\"\r\n                          onClick={async () => {\r\n                            setUpvoteLoadingId(product._id);\r\n                            const res = await fetch(\"/api/upvote\", {\r\n                              method: \"POST\",\r\n                              headers: { \"Content-Type\": \"application/json\" },\r\n                              body: JSON.stringify({\r\n                                productId: product._id,\r\n                                publicUserId: data?.publicUserId,\r\n                              }),\r\n                            });\r\n\r\n                            const result = await res.json();\r\n\r\n                            setData((prev) => {\r\n                              if (!prev) return prev;\r\n                              return {\r\n                                ...prev,\r\n                                products: prev.products.map((prod) =>\r\n                                  prod._id === product._id\r\n                                    ? { ...prod, upvotes: result.upvotes }\r\n                                    : prod\r\n                                ),\r\n                              };\r\n                            });\r\n                            setUpvoteLoadingId(null);\r\n                          }}\r\n                        >\r\n                          {upvoteLoadingId === product._id ? (\r\n                            <Lottie\r\n                              animationData={animationLoad}\r\n                              loop={true}\r\n                              autoplay={true}\r\n                              className=\"upvoteLoad\"\r\n                            />\r\n                          ) : (\r\n                            <>\r\n                              <Image\r\n                                src={`/assets/shared/icon-arrow-up.svg`}\r\n                                width={8}\r\n                                height={4}\r\n                                alt=\"comment\"\r\n                              />\r\n                              {product.upvotes}\r\n                            </>\r\n                          )}\r\n                        </p>\r\n                        <p className=\"commentNumber\">\r\n                          <Image\r\n                            src={`/assets/shared/icon-comments.svg`}\r\n                            width={18}\r\n                            height={16}\r\n                            alt=\"comment\"\r\n                          />\r\n                          {product.comments?.length ?? 0}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </ul>\r\n          ))}\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}