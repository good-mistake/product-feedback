{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Gaming/Desktop/html/product-feedback/src/app/view/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport animationLoad from \"./Animation - 1748797716617.json\";\r\nconst Page = () => {\r\n  const route = useRouter();\r\n  const [data, setData] = useState<{\r\n    publicUserId: string;\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    products: any[];\r\n  } | null>(null);\r\n  const [upvoteLoadingId, setUpvoteLoadingId] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchGuest = async () => {\r\n      const res = await fetch(\"/api/guest\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ userAgent: navigator.userAgent }),\r\n      });\r\n\r\n      const result = await res.json();\r\n      console.log(\"API result:\", result);\r\n      setData(result);\r\n    };\r\n\r\n    fetchGuest();\r\n  }, []);\r\n  console.log(data);\r\n  const normalizedStatuses = data?.products?.map((product) => ({\r\n    ...product,\r\n    status: product.status.toLowerCase(),\r\n  }));\r\n  console.log(normalizedStatuses, \"statuses\");\r\n  const groupedByStatus =\r\n    normalizedStatuses?.reduce((acc, product) => {\r\n      const status = product.status.toLowerCase();\r\n      if (!acc[status]) acc[status] = [];\r\n      acc[status].push(product);\r\n      return acc; // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    }, {} as Record<string, any[]>) ?? {};\r\n  console.log(groupedByStatus, \"groupedByStatus\");\r\n  console.log(groupedByStatus.planned, \"groupedByStatus\");\r\n  const statuses = [\"planned\", \"in-progress\", \"live\"];\r\n  const statusLabels: Record<\r\n    string,\r\n    { label: string; text: string; color: string }\r\n  > = {\r\n    planned: {\r\n      label: \"Planned\",\r\n      text: \"Ideas prioritized for research\",\r\n      color: \"#F49F85\",\r\n    },\r\n    \"in-progress\": {\r\n      label: \"In-Progress\",\r\n      text: \"Currently being developed\",\r\n      color: \"#AD1FEA\",\r\n    },\r\n    live: {\r\n      label: \"Live\",\r\n      text: \"Released features\",\r\n      color: \"#62BCFA\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-start justify-center gap-10 min-h-screen p-10 view\">\r\n      <section className=\"header\">\r\n        <div>\r\n          <button onClick={() => route.push(\"/\")}>\r\n            <Image\r\n              src={\"/assets/shared/icon-arrow-left.svg\"}\r\n              width={8}\r\n              height={4}\r\n              alt=\"arrow left\"\r\n            />\r\n            Go Back\r\n          </button>\r\n          <h3>Roadmap </h3>\r\n        </div>\r\n        <button onClick={() => route.push(\"/add\")}>+ Add Feedback</button>\r\n      </section>\r\n      <section className=\"roadmapContent\">\r\n        {groupedByStatus &&\r\n          statuses.map((status) => (\r\n            <ul key={status}>\r\n              <h3 key={status}>\r\n                {statusLabels[status].label}\r\n                <span>\r\n                  {`(${\r\n                    groupedByStatus[status]\r\n                      ? groupedByStatus[status].length\r\n                      : \"0\"\r\n                  })`}\r\n                </span>\r\n              </h3>\r\n              <p>{statusLabels[status].text}</p>\r\n              <div>\r\n                {\r\n                  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                  groupedByStatus[status]?.map((product: any) => (\r\n                    <div key={product._id}>\r\n                      <p>\r\n                        <span></span>\r\n                        {statusLabels[status].label}\r\n                      </p>\r\n                      <h4>{product.title}</h4>\r\n                      <p>{product.description}</p>\r\n                      <p>{product.category}</p>\r\n                      <p\r\n                        className=\"upvotes\"\r\n                        onClick={async () => {\r\n                          setUpvoteLoadingId(p._id);\r\n                          const res = await fetch(\"/api/upvote\", {\r\n                            method: \"POST\",\r\n                            headers: { \"Content-Type\": \"application/json\" },\r\n                            body: JSON.stringify({\r\n                              productId: p._id,\r\n                              publicUserId: data?.publicUserId,\r\n                            }),\r\n                          });\r\n\r\n                          const result = await res.json();\r\n\r\n                          setData((prev) => {\r\n                            if (!prev) return prev;\r\n                            return {\r\n                              ...prev,\r\n                              products: prev.products.map((prod) =>\r\n                                prod._id === p._id\r\n                                  ? { ...prod, upvotes: result.upvotes }\r\n                                  : prod\r\n                              ),\r\n                            };\r\n                          });\r\n                          setUpvoteLoadingId(null);\r\n                        }}\r\n                      >\r\n                        {upvoteLoadingId === p._id ? (\r\n                          <Lottie\r\n                            animationData={animationLoad}\r\n                            loop={true}\r\n                            autoplay={true}\r\n                            className=\"upvoteLoad\"\r\n                          />\r\n                        ) : (\r\n                          <>\r\n                            <Image\r\n                              src={`/assets/shared/icon-arrow-up.svg`}\r\n                              width={8}\r\n                              height={4}\r\n                              alt=\"comment\"\r\n                            />\r\n                            {p.upvotes}\r\n                          </>\r\n                        )}\r\n                      </p>\r\n                    </div>\r\n                  ))\r\n                }\r\n              </div>\r\n            </ul>\r\n          ))}\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Page;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}